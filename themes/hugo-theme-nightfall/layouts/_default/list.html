{{ define "title"}}
{{ .Title }} | {{ .Site.Params.author }}
{{ end }}

{{ define "main" }}

<div>
    <div class="listHeader">
        <h1>{{ .Title }}</h1>
    </div>

    {{ with .Content }}
    <div class="listContent">
        <!-- {{- . -}} -->
    </div>
    {{ end }}

    {{ $pages := slice }}
    {{ $categories := slice }}

    <div>
    {{ range .Pages }}
        {{ printf "%#v" .Page.Title }}<br>

    {{ end }}

    {{ range where .Site.RegularPages.ByTitle "Type" "posts" }}
        {{ $category := (index .Params.categories 0) }}
        {{ $categories = $categories | append $category }}
        {{ $pages = $pages | append (dict "category" $category "page" .Page) }}
    {{ end }}

    {{ range $categories | uniq | sort }}
        <h2>{{ . }}</h2>
        {{ range where $pages "category" . }}
            <a href="{{ .page.RelPermalink }}">{{ .page.Title }}</a><br>
        {{ end }}
    {{ end }}

        
    </div>
</div>

{{ end }}